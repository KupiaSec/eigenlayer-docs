
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Collection of notes from Eigen Layer">
      
      
        <meta name="author" content="KupiaSec">
      
      
      
        <link rel="prev" href="../EigenPodManager/">
      
      
        <link rel="next" href="../StrategyManager/">
      
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>RewardsCoordinator - Eigen Layer Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rewardscoordinator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Eigen Layer Docs" class="md-header__button md-logo" aria-label="Eigen Layer Docs" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Eigen Layer Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RewardsCoordinator
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Eigen Layer Docs" class="md-nav__button md-logo" aria-label="Eigen Layer Docs" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    Eigen Layer Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/AVSDirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AVSDirectory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/AVSDirectoryStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AVSDirectoryStorage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/AllocationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AllocationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/AllocationManagerStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AllocationManagerStorage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/DelegationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DelegationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/DelegationManagerStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DelegationManagerStorage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/RewardsCoordinator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RewardsCoordinator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/RewardsCoordinatorStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RewardsCoordinatorStorage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/StrategyManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/core/StrategyManagerStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyManagerStorage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IAVSDirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAVSDirectory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IAVSRegistrar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAVSRegistrar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IAllocationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAllocationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IBackingEigen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IBackingEigen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IDelegationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IDelegationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IETHPOSDeposit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IETHPOSDeposit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IEigen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IEigen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IEigenPod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IEigenPod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IEigenPodManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IEigenPodManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IPausable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPausable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IPauserRegistry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPauserRegistry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IPermissionController/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPermissionController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IRewardsCoordinator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IRewardsCoordinator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/ISemVerMixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISemVerMixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IShareManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IShareManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/ISignatureUtilsMixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISignatureUtilsMixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IStrategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IStrategyFactory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IStrategyFactory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/interfaces/IStrategyManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IStrategyManager
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Libraries
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/BeaconChainProofs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BeaconChainProofs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/BytesLib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BytesLib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/Endian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Endian
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/Merkle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Merkle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/OperatorSetLib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorSetLib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/SlashingLib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SlashingLib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/libraries/Snapshots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snapshots
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mixins
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Mixins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/mixins/PermissionControllerMixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PermissionControllerMixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/mixins/SemVerMixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SemVerMixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/mixins/SignatureUtilsMixin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SignatureUtilsMixin
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Permissions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Permissions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/permissions/Pausable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pausable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/permissions/PauserRegistry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PauserRegistry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/permissions/PermissionController/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PermissionController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/permissions/PermissionControllerStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PermissionControllerStorage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pods
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Pods
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/pods/EigenPod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/pods/EigenPodManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPodManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/pods/EigenPodManagerStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPodManagerStorage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/pods/EigenPodPausingConstants/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPodPausingConstants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/pods/EigenPodStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPodStorage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Strategies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/strategies/EigenStrategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/strategies/StrategyBase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyBase
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/strategies/StrategyBaseTVLLimits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyBaseTVLLimits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/strategies/StrategyFactory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyFactory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/strategies/StrategyFactoryStorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyFactoryStorage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Token
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Token
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/token/BackingEigen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BackingEigen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code/token/Eigen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eigen
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AVSDirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AVSDirectory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AllocationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AllocationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DelegationManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DelegationManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EigenPod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EigenPodManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EigenPodManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    RewardsCoordinator
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    RewardsCoordinator
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rewardscoordinator" class="md-nav__link">
    <span class="md-ellipsis">
      RewardsCoordinator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RewardsCoordinator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      High-level Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-state-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Important state variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helpful-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Helpful definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitting-rewards-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Submitting Rewards Requests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submitting Rewards Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#createavsrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createAVSRewardsSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrewardsforallsubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createRewardsForAllSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrewardsforallearners" class="md-nav__link">
    <span class="md-ellipsis">
      createRewardsForAllEarners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createoperatordirectedavsrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createOperatorDirectedAVSRewardsSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createoperatordirectedoperatorsetrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createOperatorDirectedOperatorSetRewardsSubmission
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distributing-and-claiming-rewards" class="md-nav__link">
    <span class="md-ellipsis">
      Distributing and Claiming Rewards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Distributing and Claiming Rewards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#submitroot" class="md-nav__link">
    <span class="md-ellipsis">
      submitRoot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disableroot" class="md-nav__link">
    <span class="md-ellipsis">
      disableRoot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setclaimerfor" class="md-nav__link">
    <span class="md-ellipsis">
      setClaimerFor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processclaim" class="md-nav__link">
    <span class="md-ellipsis">
      processClaim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processclaims" class="md-nav__link">
    <span class="md-ellipsis">
      processClaims
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      System Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setactivationdelay" class="md-nav__link">
    <span class="md-ellipsis">
      setActivationDelay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setdefaultoperatorsplit" class="md-nav__link">
    <span class="md-ellipsis">
      setDefaultOperatorSplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrewardsupdater" class="md-nav__link">
    <span class="md-ellipsis">
      setRewardsUpdater
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrewardsforallsubmitter" class="md-nav__link">
    <span class="md-ellipsis">
      setRewardsForAllSubmitter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatoravssplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorAVSsplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatorpisplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorPIsplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatorsetsplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorSetSplit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewards-merkle-tree-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Rewards Merkle Tree Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#off-chain-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Off Chain Calculation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../StrategyManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StrategyManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >
        
          
          <label class="md-nav__link" for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Accounting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            Accounting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accounting/SharesAccounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shares Accounting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accounting/SharesAccountingEdgeCases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shares Accounting Edge Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accounting/SlashingEdgeCase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dual Slashing Edge Case
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experimental/AVS-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Purpose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../permissions/PermissionController/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PermissionController
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rewardscoordinator" class="md-nav__link">
    <span class="md-ellipsis">
      RewardsCoordinator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RewardsCoordinator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-level-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      High-level Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-state-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Important state variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helpful-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Helpful definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitting-rewards-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Submitting Rewards Requests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submitting Rewards Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#createavsrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createAVSRewardsSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrewardsforallsubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createRewardsForAllSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrewardsforallearners" class="md-nav__link">
    <span class="md-ellipsis">
      createRewardsForAllEarners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createoperatordirectedavsrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createOperatorDirectedAVSRewardsSubmission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createoperatordirectedoperatorsetrewardssubmission" class="md-nav__link">
    <span class="md-ellipsis">
      createOperatorDirectedOperatorSetRewardsSubmission
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distributing-and-claiming-rewards" class="md-nav__link">
    <span class="md-ellipsis">
      Distributing and Claiming Rewards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Distributing and Claiming Rewards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#submitroot" class="md-nav__link">
    <span class="md-ellipsis">
      submitRoot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disableroot" class="md-nav__link">
    <span class="md-ellipsis">
      disableRoot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setclaimerfor" class="md-nav__link">
    <span class="md-ellipsis">
      setClaimerFor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processclaim" class="md-nav__link">
    <span class="md-ellipsis">
      processClaim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processclaims" class="md-nav__link">
    <span class="md-ellipsis">
      processClaims
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      System Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setactivationdelay" class="md-nav__link">
    <span class="md-ellipsis">
      setActivationDelay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setdefaultoperatorsplit" class="md-nav__link">
    <span class="md-ellipsis">
      setDefaultOperatorSplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrewardsupdater" class="md-nav__link">
    <span class="md-ellipsis">
      setRewardsUpdater
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrewardsforallsubmitter" class="md-nav__link">
    <span class="md-ellipsis">
      setRewardsForAllSubmitter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatoravssplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorAVSsplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatorpisplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorPIsplit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setoperatorsetsplit" class="md-nav__link">
    <span class="md-ellipsis">
      setOperatorSetSplit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewards-merkle-tree-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Rewards Merkle Tree Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#off-chain-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Off Chain Calculation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>RewardsCoordinator</h1>

<h2 id="rewardscoordinator">RewardsCoordinator</h2>
<table>
<thead>
<tr>
<th>File</th>
<th>Type</th>
<th>Proxy</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../../src/contracts/core/RewardsCoordinator.sol"><code>RewardsCoordinator.sol</code></a></td>
<td>Singleton</td>
<td>Transparent proxy</td>
</tr>
</tbody>
</table>
<!-- The primary functions of the `RewardsCoordinator` contract are to (i) accept ERC20 rewards from AVSs (Actively Validated Services) to their Operators and delegated Stakers for a given time range; (ii) enable the protocol to provide ERC20 tokens to all stakers over a specified time range; and (iii) allow stakers and operators to claim their accumulated earnings. -->

<p>The <code>RewardsCoordinator</code> accepts ERC20s from AVSs alongside rewards submission requests made out to Operators who, during a specified time range, were registered to the AVS in the core <a href="../AllocationManager/"><code>AllocationManager</code></a> contract.</p>
<p>There are two forms of rewards:
* Rewards v1, also known as rewards submissions.
* Rewards v2, also known as operator-directed rewards submissions. See the <a href="https://github.com/eigenfoundation/ELIPs/blob/main/ELIPs/ELIP-001.md">ELIP</a> for additional context on this rewards type.</p>
<p><em>Off-chain</em>, the trusted <em>rewards updater</em> calculates a rewards distribution over some rewards submission's time range, depending on the rewards type. For a <strong>v1 rewards submission</strong>, it is based on: (i) the relative stake weight of each Operator's Stakers and (ii) a default split given to the Operator. For a <strong>v2 rewards submission</strong>, it is based on: (i) an AVS's custom rewards logic, (ii) the per-operator splits.</p>
<p><em>On-chain</em>, the rewards updater sends the <code>RewardsCoordinator</code> a merkle root of each earner's cumulative earnings. Earners provide merkle proofs to the <code>RewardsCoordinator</code> to claim rewards against these roots.</p>
<p>The typical user flow is as follows:
1. An AVS submits a <em>rewards submission</em>, either a <code>RewardsSubmission</code> (v1) or <code>OperatorDirectedRewardsSubmission</code> (v2), to the <code>RewardsCoordinator</code> contract, which specifies a time range (<code>startTimestamp</code> and <code>duration</code>) and <code>token</code>. The rewards submission also specifies the relative reward weights of strategies (i.e. "distribute 80% out to holders of X strategy, and 20% to holders of strategy Y").
   * Note that <strong>v1 rewards</strong> specify a total <code>amount</code>, whereas <strong>v2 rewards</strong> specify a per-operator reward (due to customizable rewards logic). <strong>v2 rewards</strong> also allow for adding a <code>description</code> of the rewards submission's purpose.
2. Off-chain, the rewards submissions are used to calculate reward distributions, which are periodically consolidated into a merkle tree.
3. The root of this tree (aka the <code>DistributionRoot</code>) is posted on-chain by the <em>rewards updater</em>. A <code>DistributionRoot</code> becomes active for claims after some globally-configured <code>activationDelay</code>.
4. Stakers and Operators (or their configured "claimers") can claim their accumulated earnings by providing a merkle proof against any previously-posted <code>DistributionRoot</code>.</p>
<p>This entire flow will repeat periodically as AVSs submit rewards submissions, <code>DistributionRoots</code> are submitted, and Stakers/Operators claim their accumulated earnings. Note that <code>DistributionRoots</code> contain <em>cumulative earnings</em>, meaning Stakers/Operators aren't required to claim against every root - simply claiming against the most recent root will claim anything not yet claimed.</p>
<h4 id="high-level-concepts">High-level Concepts</h4>
<p>This document is organized according to the following themes (click each to be taken to the relevant section):
* <a href="#submitting-rewards-requests">Submitting Rewards Requests</a>
* <a href="#distributing-and-claiming-rewards">Distributing and Claiming Rewards</a>
* <a href="#system-configuration">System Configuration</a>
* <a href="#rewards-merkle-tree-structure">Rewards Merkle Tree Structure</a>
* <a href="#off-chain-calculation">Off Chain Calculation</a></p>
<h4 id="important-state-variables">Important state variables</h4>
<ul>
<li><code>DistributionRoot[] public distributionRoots</code>:<ul>
<li><code>distributionRoots</code> stores historic reward merkle tree roots submitted by the rewards updater. For each earner, the rewards merkle tree stores cumulative earnings per ERC20 reward token. For more details on merkle tree structure see <a href="#rewards-merkle-tree-structure">Rewards Merkle Tree Structure</a> below.</li>
</ul>
</li>
<li><code>mapping(address =&gt; address) public claimerFor</code>: earner =&gt; claimer<ul>
<li>Stakers and Operators can designate a "claimer" who can claim rewards via on their behalf via <code>processClaim</code>. If a claimer is not set in <code>claimerFor</code>, the earner will have to call <code>processClaim</code> themselves.</li>
<li>Note that the claimer isn't necessarily the reward recipient, but they do have the authority to specify the recipient when calling <code>processClaim</code> on the earner's behalf.</li>
</ul>
</li>
<li><code>mapping(address =&gt; mapping(IERC20 =&gt; uint256)) public cumulativeClaimed</code>: earner =&gt; token =&gt; total amount claimed to date<ul>
<li>Mapping for earners(Stakers/Operators) to track their total claimed earnings per reward token. This mapping is used to calculate the difference between the cumulativeEarnings stored in the merkle tree and the previous total claimed amount. This difference is then transferred to the specified destination address.</li>
</ul>
</li>
<li><code>uint16 public defaultOperatorSplitBips</code>: <em>Used off-chain</em> by the rewards updater to calculate an Operator's split for a specific reward.<ul>
<li>This is expected to be a flat 10% rate for the initial rewards release. Expressed in basis points, this is <code>1000</code>.</li>
</ul>
</li>
<li><code>mapping(address =&gt; mapping(address =&gt; OperatorSplit)) internal _operatorAVSSplitBips</code>: operator =&gt; AVS =&gt; <code>OperatorSplit</code></li>
<li>Operators specify their custom split for a given AVS for each <code>OperatorDirectedRewardsSubmission</code>, where Stakers receive a relative proportion (by stake weight) of the remaining amount.</li>
<li><code>mapping(address =&gt; OperatorSplit) internal _operatorPISplitBips</code>: operator =&gt; <code>OperatorSplit</code></li>
<li>Operators may also specify their custom split for <a href="https://www.blog.eigenlayer.xyz/introducing-programmatic-incentives-v1/">programmatic incentives</a>, where Stakers similarly receive a relative proportion (by stake weight) of the remaining amount.</li>
<li><code>mapping(address operator =&gt; mapping(bytes32 operatorSetKey =&gt; OperatorSplit split)) internal _operatorSetSplitBips</code>: operator =&gt; Operator Set Key =&gt; <code>OperatorSplit</code></li>
<li>Operators may specify their custom split for a given Operator Set, which is more granular than an overarching AVS split</li>
</ul>
<h4 id="helpful-definitions">Helpful definitions</h4>
<ul>
<li><strong>AVS</strong> (Autonomous Verifiable Service) refers to the contract entity that is submitting rewards to the <code>RewardsCoordinator</code>.</li>
<li>This is assumed to be a customized <code>ServiceManager</code> contract of some kind that is interfacing with the EigenLayer protocol. See the <code>ServiceManagerBase</code> docs here: <a href="https://github.com/Layr-Labs/eigenlayer-middleware/blob/dev/docs/ServiceManagerBase.md"><code>eigenlayer-middleware/docs/ServiceManagerBase.md</code></a>.</li>
<li>An <strong>Operator Set</strong> refers to a collection of registered operators and strategies. See <a href="https://github.com/eigenfoundation/ELIPs/blob/main/ELIPs/ELIP-002.md#operator-sets">ELIP-002</a> for more details.</li>
<li>An <strong>Operator Set Key</strong> describes the tuple of an AVS address and an ID that uniquely identifies an Operator Set. See the <a href="../AllocationManager/#operator-sets">AllocationManager</a> for details.</li>
<li>A <strong>rewards submission</strong> includes, unless specified otherwise, both the v1 <code>RewardsSubmission</code> and the v2 <code>OperatorDirectedRewardsSubmission</code> types.</li>
<li>The internal function <code>_checkClaim(RewardsMerkleClaim calldata claim, DistributionRoot memory root)</code> checks the merkle inclusion of a claim against a <code>DistributionRoot</code><ul>
<li>It reverts if any of the following are true:<ul>
<li>mismatch input param lengths: tokenIndices, tokenTreeProofs, tokenLeaves</li>
<li>earner proof reverting from calling <code>_verifyEarnerClaimProof</code></li>
<li>any of the token proofs reverting from calling <code>_verifyTokenClaimProof</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="submitting-rewards-requests">Submitting Rewards Requests</h3>
<p>Rewards are initially submitted to the contract to be distributed to Operators and Stakers by the following functions:</p>
<ul>
<li><a href="#createavsrewardssubmission"><code>RewardsCoordinator.createAVSRewardsSubmission</code></a></li>
<li><a href="#createrewardsforallsubmission"><code>RewardsCoordinator.createRewardsForAllSubmission</code></a></li>
<li><a href="#createrewardsforallearners"><code>RewardsCoordinator.createRewardsForAllEarners</code></a></li>
<li><a href="#createoperatordirectedavsrewardssubmission"><code>RewardsCoordinator.createOperatorDirectedAVSRewardsSubmission</code></a></li>
<li><a href="#createoperatordirectedoperatorsetrewardssubmission"><code>RewardsCoordinator.createOperatorDirectedOperatorSetRewardsSubmission</code></a></li>
</ul>
<h4 id="createavsrewardssubmission"><code>createAVSRewardsSubmission</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">createAVSRewardsSubmission</span><span class="p">(</span>
<span class="w">    </span>RewardsSubmission<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>RewardsSubmissions
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_AVS_REWARDS_SUBMISSION<span class="p">)</span>
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>Called by an AVS to submit a list of <code>RewardsSubmission</code>s to be distributed across all registered Operators (and Stakers delegated to each Operator). A <code>RewardsSubmission</code> consists of the following fields:
* <code>IERC20 token</code>: the address of the ERC20 token being used for reward submission
* <code>uint256 amount</code>: amount of <code>token</code> to transfer to the <code>RewardsCoordinator</code>
* <code>uint32 startTimestamp</code>: the start of the submission time range
* <code>uint32 duration</code>: the duration of the submission time range, in seconds
* <code>StrategyAndMultiplier[] strategiesAndMultipliers</code>: an array of <code>StrategyAndMultiplier</code> structs that define a linear combination of EigenLayer strategies the AVS is considering eligible for rewards. Each <code>StrategyAndMultiplier</code> contains:
    * <code>IStrategy strategy</code>: address of the strategy against which a Staker/Operator's relative shares are weighted in order to determine their reward amount
    * <code>uint96 multiplier</code>: the relative weighting of the strategy in the linear combination. (Recommended use here is to use 1e18 as the base multiplier and adjust the relative weightings accordingly)</p>
<p>For each submitted <code>RewardsSubmission</code>, this method performs a <code>transferFrom</code> to transfer the specified reward <code>token</code> and <code>amount</code> from the caller to the <code>RewardsCoordinator</code>.</p>
<p><em>Eligibility</em>:</p>
<p>In order to be eligible to claim a <code>createAVSRewardsSubmission</code> reward, the Operator should be registered for the AVS in the <code>AVSDirectory</code> during the time period over which the reward is being made (see docs for <a href="../AVSDirectory/#registeroperatortoavs"><code>AVSDirectory.registerOperatorToAVS</code></a>). If an Operator is ineligible, any Stakers delegated to the Operator are also ineligible.</p>
<p>In addition, the AVS ServiceManager contract must also implement the interfaces <code>ServiceManager.getRestakeableStrategies</code> and <code>ServiceManager.getOperatorRestakedStrategies</code> to have their rewards be successfully distributed as these view functions are called offchain as part of the rewards distribution process. This is by default implemented in the <code>ServiceManagerBase</code> contract but is important to note if the base contract is not being inherited from.
See the <code>ServiceManagerBase</code> abstract contract here: <a href="https://github.com/Layr-Labs/eigenlayer-middleware/blob/dev/src/ServiceManagerBase.sol"><code>ServiceManagerBase.sol</code></a></p>
<p><em>Rewards Distribution</em>:</p>
<p>The rewards distribution amongst the AVS's Operators and delegated Stakers is determined offchain using the strategies and multipliers provided in the <code>RewardsSubmission</code> struct as well as the actual shares for those defined strategies over the <code>RewardsSubmission</code>'s time range. These shares are read from the <a href="../EigenPodManager/"><code>EigenPodManager</code></a> (in the case of the Beacon Chain ETH strategy), or the <a href="../StrategyManager/"><code>StrategyManager</code></a> for any other strategy. Note that Stakers' shares specifically are what determines rewards distribution; Operators earn based on a combination of their own deposited shares and a configured <code>defaultOperatorSplitBips</code>.</p>
<p><em>Effects</em>:
* For each <code>RewardsSubmission</code> element
    * Transfers <code>amount</code> of <code>token</code> from the msg.sender (AVS) to the <code>RewardsCoordinator</code>
    * Hashes msg.sender(AVS), nonce, and <code>RewardsSubmission</code> struct to create a unique rewards hash and sets this value to <code>true</code> in the <code>isAVSRewardsSubmissionHash</code> mapping
    * Increments <code>submissionNonce[msg.sender]</code>
    * Emits a <code>AVSRewardsSubmissionCreated</code> event</p>
<p><em>Requirements</em>:
* Pause status MUST NOT be set: <code>PAUSED_AVS_REWARDS_SUBMISSION</code>
* Function call is not reentered
* For each <code>RewardsSubmission</code> element
    * Requirements from calling internal function <code>_validateRewardsSubmission()</code>
        * <code>rewardsSubmission.strategiesAndMultipliers.length &gt; 0</code>
        * <code>rewardsSubmission.amount &gt; 0</code>
        * <code>rewardsSubmission.amount &lt;= MAX_REWARDS_AMOUNT</code>
        * <code>rewardsSubmission.duration &lt;= MAX_REWARDS_DURATION</code>
        * <code>rewardsSubmission.duration % calculationIntervalSeconds == 0</code>
        * <code>rewardsSubmission.duration &gt; 0</code>
        * <code>rewardsSubmission.startTimestamp % calculationIntervalSeconds == 0</code>
        * <code>block.timestamp - MAX_RETROACTIVE_LENGTH &lt;= rewardsSubmission.startTimestamp</code>
        * <code>GENESIS_REWARDS_TIMESTAMP &lt;= rewardsSubmission.startTimestamp</code>
        * <code>rewardsSubmission.startTimestamp &lt;= block.timestamp + MAX_FUTURE_LENGTH</code>
        * Requirements for <code>rewardsSubmission.strategiesAndMultipliers</code>
            * Each <code>strategy</code> is whitelisted for deposit in the StrategyManager or is the <code>beaconChainETHStrategy</code>
            * <code>rewardsSubmission.strategiesAndMultipliers</code> is sorted by ascending strategy address to prevent duplicate strategies
    * <code>transferFrom</code> MUST succeed in transferring <code>amount</code> of <code>token</code> from <code>msg.sender</code> to the <code>RewardsCoordinator</code></p>
<p>The text diagram below better visualizes a valid start timestamp for a <code>RewardsSubmission</code>
<div class="highlight"><pre><span></span><code>Sliding Window for valid RewardsSubmission startTimestamp

Scenario A: GENESIS_REWARDS_TIMESTAMP IS WITHIN RANGE
        &lt;-----MAX_RETROACTIVE_LENGTH-----&gt; t (block.timestamp) &lt;---MAX_FUTURE_LENGTH---&gt;
            &lt;--------------------valid range for startTimestamp------------------------&gt;
            ^
        GENESIS_REWARDS_TIMESTAMP


Scenario B: GENESIS_REWARDS_TIMESTAMP IS OUT OF RANGE
        &lt;-----MAX_RETROACTIVE_LENGTH-----&gt; t (block.timestamp) &lt;---MAX_FUTURE_LENGTH---&gt;
        &lt;------------------------valid range for startTimestamp------------------------&gt;
    ^
GENESIS_REWARDS_TIMESTAMP
</code></pre></div></p>
<h4 id="createrewardsforallsubmission"><code>createRewardsForAllSubmission</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">createRewardsForAllSubmission</span><span class="p">(</span>
<span class="w">    </span>RewardsSubmission<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>RewardsSubmissions
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_REWARDS_FOR_ALL_SUBMISSION<span class="p">)</span>
<span class="w">    </span>onlyRewardsForAllSubmitter
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>This method is identical in function to <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above, except:
* It can only be called by a whitelisted "rewards for all submitter"
* ALL Stakers are eligible for rewards, instead of those specifically registered for a given AVS</p>
<p><em>Effects</em>:
* See <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above. The only differences are that:
    * Each rewards submission hash is stored in the <code>isRewardsSubmissionForAllHash</code> mapping
    * A <code>RewardsSubmissionForAllCreated</code> event is emitted</p>
<p><em>Requirements</em>:
* See <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above. The only difference is that each calculated rewards submission hash MUST NOT already exist in the <code>isRewardsSubmissionForAllHash</code> mapping.</p>
<h4 id="createrewardsforallearners"><code>createRewardsForAllEarners</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">createRewardsForAllEarners</span><span class="p">(</span>
<span class="w">    </span>RewardsSubmission<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>RewardsSubmissions
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_REWARDS_FOR_ALL_SUBMISSION<span class="p">)</span>
<span class="w">    </span>onlyRewardsForAllSubmitter
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>This method is identical in function to <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above, except:
* It can only be called by a whitelisted "rewards for all submitter"
* Only operators who have opted into at least one AVS and the operator's delegated stakers are eligible for rewards</p>
<p><em>Effects</em>:
* See <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above. The only differences are that:
    * Each rewards submission hash is stored in the <code>isRewardsSubmissionForAllEarnersHash</code> mapping
    * Emits a <code>RewardsSubmissionForAllEarnersCreated</code> event</p>
<p><em>Requirements</em>:
* See <a href="#createavsrewardssubmission"><code>createAVSRewardsSubmission</code></a> above. The only difference is that each calculated rewards submission hash MUST NOT already exist in the <code>isRewardsSubmissionForAllEarnersHash</code> mapping.</p>
<h4 id="createoperatordirectedavsrewardssubmission"><code>createOperatorDirectedAVSRewardsSubmission</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">createOperatorDirectedAVSRewardsSubmission</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">avs</span><span class="p">,</span>
<span class="w">    </span>OperatorDirectedRewardsSubmission<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>operatorDirectedRewardsSubmissions
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_OPERATOR_DIRECTED_AVS_REWARDS_SUBMISSION<span class="p">)</span>
<span class="w">    </span>checkCanCall<span class="p">(</span>avs<span class="p">)</span>
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>AVS may make Rewards v2 submissions by calling <code>createOperatorDirectedAVSRewardsSubmission()</code> with any custom on-chain or off-chain logic to determine their rewards distribution strategy. This can be custom to the work performed by Operators during a certain period of time, can be a flat reward rate, or some other structure based on the AVSs economic model. This would enable AVSs' flexibility in rewarding different operators for performance and other variables while maintaining the same easily calculable reward rate for stakers delegating to the same operator and strategy. The AVS can submit multiple performance-based rewards denominated in different tokens for even more flexibility.</p>
<p><em>Effects</em>:
* For each <code>OperatorDirectedRewardsSubmission</code> element
  * Transfers <code>amount</code> of <code>token</code> from <code>msg.sender</code> to the <code>RewardsCoordinator</code>
  * Hashes <code>AVS</code>, <code>nonce</code>, and <code>OperatorDirectedRewardsSubmission</code> struct to create a unique rewards hash and sets this value to <code>true</code> in the <code>isOperatorDirectedAVSRewardsSubmissionHash</code> mapping
  * Increments <code>submissionNonce[avs]</code>
  * Emits an <code>OperatorDirectedAVSRewardsSubmissionCreated</code> event</p>
<p><em>Requirements</em>:
* Pause status MUST NOT be set: <code>PAUSED_OPERATOR_DIRECTED_AVS_REWARDS_SUBMISSION</code>
* Caller MUST be authorized, either as the AVS itself or an admin/appointee (see <a href="../../permissions/PermissionController/"><code>PermissionController.md</code></a>)
* Function call is not reentered
* For each <code>OperatorDirectedRewardsSubmission</code> element:
  * Requirements from calling internal function <code>_validateOperatorDirectedRewardsSubmission()</code>
    * <code>operatorDirectedRewardsSubmission.strategiesAndMultipliers.length &gt; 0</code>
    * <code>operatorDirectedRewardsSubmission.duration &lt;= MAX_REWARDS_DURATION</code>
    * <code>operatorDirectedRewardsSubmission.duration % calculationIntervalSeconds == 0</code>
    * <code>operatorDirectedRewardsSubmission.duration &gt; 0</code>
    * <code>operatorDirectedRewardsSubmission.startTimestamp % calculationIntervalSeconds == 0</code>
    * <code>block.timestamp - MAX_RETROACTIVE_LENGTH &lt;= operatorDirectedRewardsSubmission.startTimestamp</code>
    * <code>GENESIS_REWARDS_TIMESTAMP &lt;= operatorDirectedRewardsSubmission.startTimestamp</code>
    * For each <code>operatorDirectedRewardsSubmission.strategiesAndMultipliers</code> element:
      * Each <code>strategy</code> is whitelisted for deposit in the StrategyManager or is the <code>beaconChainETHStrategy</code>
      * <code>rewardsSubmission.strategiesAndMultipliers</code> is sorted by ascending strategy address to prevent duplicate strategies
    * <code>operatorDirectedRewardsSubmission.operatorRewards.length &gt; 0</code>
    * For each <code>operatorDirectedRewardsSubmission.operatorRewards</code> element:
      * <code>operatorReward.operator != address(0)</code>
      * <code>currOperatorAddress &lt; operatorReward.operator</code>
      * <code>operatorReward.amount &gt; 0</code>
    * <code>totalAmount &lt;= MAX_REWARDS_AMOUNT</code>, where <code>totalAmount</code> is the sum of every <code>operatorReward.amount</code>
    * <code>operatorDirectedRewardsSubmission.startTimestamp + operatorDirectedRewardsSubmission.duration &lt; block.timestamp</code>, enforcing strictly retoractive rewards submissions
  * <code>transferFrom</code> MUST succeed in transferring <code>amount</code> of <code>token</code> from <code>msg.sender</code> to the <code>RewardsCoordinator</code></p>
<h4 id="createoperatordirectedoperatorsetrewardssubmission"><code>createOperatorDirectedOperatorSetRewardsSubmission</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">createOperatorDirectedOperatorSetRewardsSubmission</span><span class="p">(</span>
<span class="w">    </span>OperatorSet<span class="w"> </span>calldata<span class="w"> </span>operatorSet<span class="p">,</span>
<span class="w">    </span>OperatorDirectedRewardsSubmission<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>operatorDirectedRewardsSubmissions
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_OPERATOR_DIRECTED_OPERATOR_SET_REWARDS_SUBMISSION<span class="p">)</span>
<span class="w">    </span>checkCanCall<span class="p">(</span>operatorSet<span class="p">.</span>avs<span class="p">)</span>
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>This function allows AVSs to make rewards submissions to specific operator sets, allowing for more granularly targeted rewards based on tasks assigned to a specific operator set, or any other custom AVS logic. Its functionality is almost identical to <a href="#createoperatordirectedavsrewardssubmission"><code>createOperatorDirectedAVSRewardsSubmission</code></a>, save for some operator-set specific requirements, state variables, and events.</p>
<p>Note that an AVS must specify an operator set registered to the AVS; in other words, an operator set belonging to a different AVS, or an unregistered operator set, will cause this function to revert.</p>
<p>Also note that making this reward submission with a duration extending prior to the slashing release will result in those reward snapshots, prior to the slashing release, being refunded to the AVS (This is handled in the Sidecar rewards calculation logic).</p>
<p><em>Effects</em>:
* See <a href="#createoperatordirectedavsrewardssubmission"><code>createOperatorDirectedAVSRewardsSubmission</code></a> above. The only differences are that:
  * Each rewards submission is stored in the <code>isOperatorDirectedOperatorSetRewardsSubmissionHash</code> mapping
  * An <code>OperatorDirectedOperatorSetRewardsSubmissionCreated</code> event is emitted</p>
<p><em>Requirements</em>:
* See <a href="#createoperatordirectedavsrewardssubmission"><code>createOperatorDirectedAVSRewardsSubmission</code></a> above. The only differences are that:
  * <code>operatorSet</code> MUST be a <a href="../AllocationManager/#createoperatorsets">registered operator set</a> for the given AVS as according to <code>allocationManager.isOperatorSet()</code>
  * Pause status is instead: <code>PAUSED_OPERATOR_DIRECTED_OPERATOR_SET_REWARDS_SUBMISSION</code></p>
<hr />
<h3 id="distributing-and-claiming-rewards">Distributing and Claiming Rewards</h3>
<p>The <em>rewards updater</em> calculates rewards distributions and submit claimable roots through the following function <code>submitRoot</code>. They can also disable the root if it has not yet been activated:</p>
<ul>
<li><a href="#submitroot"><code>RewardsCoordinator.submitRoot</code></a></li>
<li><a href="#disableroot"><code>RewardsCoordinator.disableRoot</code></a></li>
</ul>
<p>Earners configure and claim these rewards using the following functions:</p>
<ul>
<li><a href="#setclaimerfor"><code>RewardsCoordinator.setClaimerFor</code></a></li>
<li><a href="#processclaim"><code>RewardsCoordinator.processClaim</code></a></li>
<li><a href="#processclaims"><code>RewardsCoordinator.processClaims</code></a></li>
</ul>
<h4 id="submitroot"><code>submitRoot</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">submitRoot</span><span class="p">(</span>
<span class="w">    </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">root</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint32</span><span class="w"> </span><span class="nv">rewardsCalculationEndTimestamp</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_SUBMIT_DISABLE_ROOTS<span class="p">)</span>
<span class="w">    </span>onlyRewardsUpdater
</code></pre></div>
<p>Called only by the <code>rewardsUpdater</code> address to create a new <code>DistributionRoot</code> in the RewardsCoordinator. The <code>DistributionRoot</code> struct contains the following fields:
* <code>bytes32 root</code>: the merkle root of the rewards merkle tree
* <code>uint32 rewardsCalculationEndTimestamp</code>: the end of the rewards time range for which the <code>DistributionRoot</code> is being submitted
* <code>uint32 activatedAt</code>: the timestamp in seconds when the <code>DistributionRoot</code> is activated and can be claimed against</p>
<p><code>submitRoot</code> pushes a new <code>DistributionRoot</code> to the <code>distributionRoots</code> array. The <code>DistributionRoot.activatedAt</code> timestamp is set to <code>block.timestamp + activationDelay()</code> to allow for a delay before claims can be processed. Once this delay has passed, the root can be used to verify merkle proofs of rewards made out to Stakers/Operators.</p>
<p><em>Effects</em>:
* Pushes a new <code>DistributionRoot</code> to the <code>distributionRoots</code> array
* Sets <code>currRewardsCalculationEndTimestamp</code> to the param <code>rewardsCalculationEndTimestamp</code>
* Emits a <code>DistributionRootSubmitted</code> event</p>
<p><em>Requirements</em>:
* Pause status MUST NOT be set: <code>PAUSED_SUBMIT_DISABLE_ROOTS</code>
* <code>msg.sender</code> MUST be the <code>rewardsUpdater</code>
* <code>rewardsCalculationEndTimestamp &gt; currRewardsCalculationEndTimestamp</code>
* <code>rewardsCalculationEndTimestamp &lt; block.timestamp</code></p>
<h4 id="disableroot"><code>disableRoot</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">disableRoot</span><span class="p">(</span>
<span class="w">    </span><span class="kt">uint32</span><span class="w"> </span><span class="nv">rootIndex</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_SUBMIT_DISABLE_ROOTS<span class="p">)</span>
<span class="w">    </span>onlyRewardsUpdater
</code></pre></div>
<p>Called only by the <code>rewardsUpdater</code> address to disable a pending <code>DistributionRoot</code> that has not yet been activated (activatedAt timestamp hasn't been reached yet) in the RewardsCoordinator. Once the activatedAt timestamp has been reached, a root can no longer be disabled and is deemed finalized and claimable against.
This is to add additional measures to prevent invalid roots posted to the contract, either from error or potentially malicious roots posted.</p>
<p><em>Effects</em>:
* Sets the <code>disabled</code> field to True for the corresponding <code>DistributionRoot</code>
* <code>DistributionRoot</code> can no longer be claimed against in <code>processClaim</code>
* Emits a <code>DistributionRootDisabled</code> event</p>
<p><em>Requirements</em>:
* Pause status MUST NOT be set: <code>PAUSED_SUBMIT_DISABLE_ROOTS</code>
* <code>msg.sender</code> MUST be the <code>rewardsUpdater</code>
* <code>rootIndex &lt; distributionRoots.length</code>
* <code>root.disabled == False</code>
* <code>block.timestamp &lt; root.activatedAt</code>
* <code>rewardsCalculationEndTimestamp &lt; block.timestamp</code></p>
<h4 id="setclaimerfor"><code>setClaimerFor</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setClaimerFor</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">claimer</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span>
</code></pre></div>
<p>Called by an earner (Staker/Operator) to set a claimer address that can call <code>processClaim</code> on their behalf. If the claimer is not set (<code>claimerFor[earner] == address(0)</code>), the earner themselves can call <code>processClaim</code> directly.</p>
<p><em>Effects</em>:
* Sets the <code>claimerFor[msg.sender]</code> to the input param <code>claimer</code>
* Emits a <code>ClaimerForSet</code> event</p>
<h4 id="processclaim"><code>processClaim</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">processClaim</span><span class="p">(</span>
<span class="w">    </span>RewardsMerkleClaim<span class="w"> </span>calldata<span class="w"> </span>claim<span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_PROCESS_CLAIM<span class="p">)</span>
<span class="w">    </span>nonReentrant
</code></pre></div>
<p>Called an earner (Staker/Operator) to claim their accumulated earnings by providing a merkle proof against a posted <code>DistributionRoot</code>. If the earner has configured a claimer (via <code>setClaimerFor</code>), the claimer must call this method instead.</p>
<p>The <code>RewardsMerkleClaim</code> struct contains the following fields (see <a href="#rewards-merkle-tree-structure">Rewards Merkle Tree Structure</a> for further details):
* <code>uint32 rootIndex</code>: the index of the <code>DistributionRoot</code> in <code>distributionRoots</code> to prove against
* <code>uint32 earnerIndex</code>: the index of the earner's account root in the merkle tree
* <code>bytes earnerTreeProof</code>: the proof of the earner's <code>EarnerTreeMerkleLeaf</code> against the <code>DistributionRoot</code>
* <code>EarnerTreeMerkleLeaf earnerLeaf</code>: the earner's address and token subtree root
    * <code>address earner</code>: the address of the earner
    * <code>bytes32 earnerTokenRoot</code>: the merkle root of the earner's token merkle tree
* <code>uint32[] tokenIndices</code>: the indices of the token leaves in the earner's subtree
* <code>bytes[] tokenTreeProofs</code>: the proofs of the token leaves against the earner's <code>earnerTokenRoot</code>
* <code>TokenTreeMerkleLeaf[] tokenLeaves</code>: the token leaves to be claimed:
    * <code>IERC20 token</code>: the ERC20 token to be claimed
    * <code>uint256 amount</code>: the amount of the ERC20 token to be claimed</p>
<p><code>processClaim</code> is a simple wrapper function which calls out to the internal function <code>_processClaim</code>, which holds all of the necessary logic.</p>
<p><code>_processClaim</code> will first call <code>_checkClaim</code> to verify the merkle proofs against the <code>DistributionRoot</code> at the specified <code>rootIndex</code>. This is done by first performing a merkle proof verification of the earner's <code>EarnerTreeMerkleLeaf</code> against the <code>DistributionRoot</code> and then for each tokenIndex, verifying each token leaf against the earner's <code>earnerTokenRoot</code>.</p>
<p>The caller must be the set claimer address in the <code>claimerFor</code> mapping or the earner themselves if the claimer is not set.</p>
<p>After the claim is verified, for each token leaf, the difference between the cumulative earnings in the merkle tree and the previous total claimed amount last stored in the contract is calculated and transferred from the <code>RewardsCoordinator</code> contract to the address <code>recipient</code>.</p>
<p><em>Effects</em>:
* For each <code>claim.tokenLeaves</code>:
    * Calculates <code>uint claimAmount = tokenLeaf.cumulativeEarnings - cumulativeClaimed[earner][tokenLeaf.token]</code>
        * Transfers <code>claimAmount</code> of <code>tokenLeaf.token</code> to the specified <code>recipient</code>
    * Updates the <code>cumulativeClaimed</code> mapping for the earner and token
    * Emits a <code>RewardsClaimed</code> event</p>
<p><em>Requirements</em>:
* Pause status MUST NOT be set: <code>PAUSED_PROCESS_CLAIM</code>
* The <code>claim</code> must have valid proofs against a valid <code>DistributionRoot</code>:
    * For the <code>DistributionRoot</code> given by <code>claim.rootIndex</code>, the root MUST be active (<code>block.timestamp &gt;= root.activatedAt</code>)
    * <code>claim.tokenIndices</code> MUST equal the lengths of <code>claim.TokenTreeProofs</code> AND <code>claim.tokenLeaves</code>
    * <code>claim.earnerTreeProof</code> MUST validate <code>claim.earnerLeaf</code> against the <code>DistributionRoot</code>
    * For each <code>claim.tokenIndices[i]</code>:
        * <code>claim.tokenTreeProofs[i]</code> MUST validate <code>claim.tokenLeaves[i]</code> against <code>claim.earnerLeaf.earnerTokenRoot</code>
* If the <code>earner</code> specified in <code>claim.earnerLeaf.earner</code> has a designated <code>claimer</code> in <code>claimerFor[earner]</code>, <code>msg.sender</code> MUST be the <code>claimer</code>
    * Otherwise, <code>msg.sender</code> MUST be the <code>earner</code>
* For each <code>TokenTreeMerkleLeaf</code>,
    * <code>tokenLeaf.cumulativeEarnings &gt; cumulativeClaimed[earner][token]</code>: cumulativeEarnings must be gt than cumulativeClaimed. Trying to reclaim with the same proofs will revert because the claimed and earnings values will equal, breaking this requirement.
    * <code>tokenLeaf.token.safeTransfer(recipient, claimAmount)</code> MUST succeed</p>
<h4 id="processclaims"><code>processClaims</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">processClaims</span><span class="p">(</span>
<span class="w">        </span>RewardsMerkleClaim<span class="p">[]</span><span class="w"> </span>calldata<span class="w"> </span>claims<span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_PROCESS_CLAIM<span class="p">)</span>
<span class="w">    </span>nonReentrant
</code></pre></div>
<p><code>processClaims</code> is a simple wrapper function around <code>_processClaim</code>, calling it once for each claim provided.</p>
<p><em>Effects</em>:
* For each <code>RewardsMerkleClaim</code> element: see <a href="#processclaim"><code>processClaim</code></a> above.</p>
<p><em>Requirements</em>
* See <a href="#processclaim"><code>processClaim</code></a> above.</p>
<hr />
<h3 id="system-configuration">System Configuration</h3>
<ul>
<li><a href="#setactivationdelay"><code>RewardsCoordinator.setActivationDelay</code></a></li>
<li><a href="#setdefaultoperatorsplit"><code>RewardsCoordinator.setDefaultOperatorSplit</code></a></li>
<li><a href="#setrewardsupdater"><code>RewardsCoordinator.setRewardsUpdater</code></a></li>
<li><a href="#setrewardsforallsubmitter"><code>RewardsCoordinator.setRewardsForAllSubmitter</code></a></li>
<li><a href="#setoperatoravssplit"><code>RewardsCoordinator.setOperatorAVSSplit</code></a></li>
<li><a href="#setoperatorpisplit"><code>RewardsCoordinator.setOperatorPISplit</code></a></li>
<li><a href="#setoperatorsetsplit"><code>RewardsCoordinator.setOperatorSetSplit</code></a></li>
</ul>
<h4 id="setactivationdelay"><code>setActivationDelay</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setActivationDelay</span><span class="p">(</span><span class="kt">uint32</span><span class="w"> </span><span class="nv">_activationDelay</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>
<p>Allows the Owner to set the global <code>activationDelay</code>. The activation delay is the time in seconds after a <code>DistributionRoot</code> is submitted before it can be claimed against. This delay is to allow for interested parties to perform verification of the root before claiming begins.</p>
<p><em>Effects</em>:
* Sets the global <code>activationDelay</code>
* Emits a <code>ActivationDelaySet</code> event</p>
<p><em>Requirements</em>:
* Caller MUST be the Owner</p>
<h4 id="setdefaultoperatorsplit"><code>setDefaultOperatorSplit</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setDefaultOperatorSplit</span><span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="nv">split</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>
<p>Allows the Owner to set the default operator split in basis points.</p>
<p>This split is <em>used off-chain</em> when calculating Operator earnings for a given rewards distribution. Operator split is calculated as a percentage of the reward amount made out to each Operator. This split is deducted from the reward amount, after which the remainder is used to calculate rewards made to any Stakers delegated to the Operator.</p>
<p><em>Effects</em>:
* Sets the <code>defaultOperatorSplitBips</code>
* Emits a <code>DefaultOperatorSplitBipsSet</code> event</p>
<p><em>Requirements</em>:
* Caller MUST be the Owner</p>
<h4 id="setrewardsupdater"><code>setRewardsUpdater</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setRewardsUpdater</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_rewardsUpdater</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>
<p>Allows the Owner to set the <code>rewardsUpdater</code> address. The <code>rewardsUpdater</code> is the singleton address that can submit new <code>DistributionRoots</code> to the <code>RewardsCoordinator</code>. The <code>rewardsUpdater</code> is a trusted entity that performs the bulk of the calculations and merkle tree structuring described in this document.</p>
<p><em>Effects</em>:
* Sets the global <code>rewardsUpdater</code> address
* Emits a <code>RewardsUpdaterSet</code> event</p>
<p><em>Requirements</em>:
* Caller MUST be the Owner</p>
<h4 id="setrewardsforallsubmitter"><code>setRewardsForAllSubmitter</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setRewardsForAllSubmitter</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_submitter</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">_newValue</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>onlyOwner
</code></pre></div>
<p>Allows the Owner to update the <code>_submitter's</code> permissions in the <code>isRewardsForAllSubmitter</code> mapping. This mapping is used to determine if a given address is a valid submitter for the <code>createRewardsForAllSubmission</code> method.</p>
<p><em>Effects</em>:
* Sets the <code>isRewardsForAllSubmitter</code> mapping for the address <code>_submitter</code> to the bool <code>_newValue</code>
* Emits a <code>RewardsForAllSubmitterSet</code> event</p>
<p><em>Requirements</em>:
* Caller MUST be the Owner</p>
<h4 id="setoperatoravssplit"><code>setOperatorAVSsplit</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setOperatorAVSSplit</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">operator</span><span class="p">,</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">avs</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">split</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_OPERATOR_AVS_SPLIT<span class="p">)</span>
<span class="w">    </span>checkCanCall<span class="p">(</span>operator<span class="p">)</span>
</code></pre></div>
<p>An Operator may, for a given AVS, set a split which will determine what percent of their attributed rewards are allocated to themselves. The remaining percentage will go to Stakers.</p>
<p>The split will take effect after an <code>activationDelay</code> set by the contract owner. Note that once an operator initiates a split update, the <code>activationDelay</code> must pass before a new split update can be initiated.</p>
<p><em>Effects</em>:
* Updates <code>operatorSplit.activatedAt</code> to <code>block.timestamp + activationDelay</code>
* If the operator has not initialized yet, sets  <code>operatorSplit.oldSplitBips</code> to <code>defaultOperatorSplitBips</code>. Else sets <code>operatorSplit.oldSplitBips</code> to the current <code>newSplitBips</code>
* Updates <code>operatorSplit.newSplitBips</code> to <code>split</code>
* Emits an <code>OperatorAVSSplitBipsSet</code> event</p>
<p><em>Requirements</em>:
* Caller MUST be authorized, either as the operator itself or an admin/appointee (see <a href="../../permissions/PermissionController/"><code>PermissionController.md</code></a>)
* Split MUST BE &lt;= 10,000 bips (100%)
* Current <code>block.timestamp</code> MUST BE greater than current <code>operatorSplit.activatedAt</code>.
  * Any pending split must have already completed prior to setting a new split.</p>
<h4 id="setoperatorpisplit"><code>setOperatorPIsplit</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setOperatorPISplit</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">operator</span><span class="p">,</span>
<span class="w">    </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">split</span>
<span class="p">)</span>
<span class="w">    </span><span class="kt">external</span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_OPERATOR_PI_SPLIT<span class="p">)</span>
<span class="w">    </span>checkCanCall<span class="p">(</span>operator<span class="p">)</span>
</code></pre></div>
<p>Similar to <a href="#setoperatoravssplit"><code>setOperatorAVSSplit</code></a>, Operators may set their split for <a href="https://www.blog.eigenlayer.xyz/introducing-programmatic-incentives-v1/">programmatic incentives</a>, allowing them to specify what percent of these rewards they will maintain and what percent will go to their Stakers. The <code>allocationDelay</code> also applies here, as well as the inability to reinitiate a split update before the delay passes.</p>
<p><em>Effects</em>:
* See <a href="#setoperatoravssplit"><code>setOperatorAVSSplit</code></a> above. The only differences are that:
  * The split is stored within <code>_operatorPISplitBips</code> instead of <code>_operatorAVSSplitBips</code>.
  * An <code>OperatorPISplitBipsSet</code> event is emitted</p>
<p><em>Requirements</em>:
* See <a href="#setoperatoravssplit"><code>setOperatorAVSSplit</code></a> above. The only difference is that:
  * Pause status is instead: <code>PAUSED_OPERATOR_PI_SPLIT</code></p>
<h4 id="setoperatorsetsplit"><code>setOperatorSetSplit</code></h4>
<div class="highlight"><pre><span></span><code><span class="kt">function</span><span class="w"> </span><span class="nv">setOperatorSetSplit</span><span class="p">(</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">operator</span><span class="p">,</span>
<span class="w">    </span>OperatorSet<span class="w"> </span>calldata<span class="w"> </span>operatorSet<span class="p">,</span>
<span class="w">    </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">split</span>
<span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="kt">external</span><span class="w"> </span>
<span class="w">    </span>onlyWhenNotPaused<span class="p">(</span>PAUSED_OPERATOR_SET_SPLIT<span class="p">)</span><span class="w"> </span>
<span class="w">    </span>checkCanCall<span class="p">(</span>operator<span class="p">)</span>
</code></pre></div>
<p><em>Effects</em>:
* See <a href="#setoperatoravssplit"><code>setOperatorAVSSplit</code></a> above. The only difference is that:
  * The split is stored within <code>_operatorSetSplitBips</code> instead of <code>_operatorAVSSplitBips</code>
  * An <code>OperatorSetSplitBipsSet</code> event is emitted </p>
<p><em>Requirements</em>:
* See <a href="#setoperatoravssplit"><code>setOperatorAVSSplit</code></a> above. The only differences are that:
  * <code>operatorSet</code> MUST be a <a href="../AllocationManager/#createoperatorsets">registered operator set</a> for the given AVS as according to <code>allocationManager.isOperatorSet()</code>
  * Pause status is instead: <code>PAUSED_OPERATOR_SET_SPLIT</code></p>
<hr />
<h3 id="rewards-merkle-tree-structure">Rewards Merkle Tree Structure</h3>
<p>This merkle tree is used to verify the claims against a <code>DistributionRoot</code>.</p>
<p>When submitting a new <code>DistributionRoot</code>, the rewards updater consolidates all <code>RewardsSubmissions</code> submitted by AVSs since the previously submitted <code>DistributionRoot</code> into a merkle tree comprised of earners and their cumulative earnings for their respective reward tokens distributed.</p>
<p>When an earner or their designated claimer calls <code>processClaim</code>, they must provide a <code>RewardsMerkleClaim</code> struct that contains the necessary information to verify their claim against the latest <code>DistributionRoot</code>. The merkle proof verification is done in the internal <code>_checkClaim</code> helper function. This function verifies the merkle proof of the earner's <code>EarnerTreeMerkleLeaf</code> against the <code>DistributionRoot</code> and then for each tokenIndex, verifies each token leaf against the earner's <code>earnerTokenRoot</code>.</p>
<p>Claimers can selectively choose which token leaves to prove against and claim accumulated earnings. Each token reward claimed in a <code>processClaim</code> call will send tokens to the <code>recipient</code> address specified in the call.</p>
<p>The rewards merkle tree is structured in the diagram below:</p>
<p><img alt="." src="../images/RewardsCoordinator_Merkle_Tree.png" /></p>
<hr />
<h3 id="off-chain-calculation">Off Chain Calculation</h3>
<p>Rewards are calculated via an off-chain data pipeline. The pipeline takes snapshots of core contract state at the <code>SNAPSHOT_CADENCE</code>, currently set to once per day. It then combines these snapshots with any active rewards to calculate what the single daily reward of an earner is. Every <code>CALCULATION_INTERVAL_SECONDS</code> rewards are accumulated up to <code>lastRewardsTimestamp + CALCULATION_INTERVAL_SECONDS</code> and posted on-chain by the entity with the <code>rewardsUpdater</code> role.</p>
<p><code>MAX_REWARDS_AMOUNT</code> is set to <code>1e38-1</code> given the precision bounds of the off-chain pipeline. An in-depth overview of the off-chain calculation can be found <a href="https://hackmd.io/Fmjcckn1RoivWpPLRAPwBw">here</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        <div class="md-footer-copyright__highlight">
          All presentation content belongs to their respective owners
        </div>
      </div>
      <div class="md-footer-social">
        <a href="https://github.com/KupiaSec" target="_blank" rel="noopener" title="GitHub" class="md-footer-social__link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
        </a>
        <a href="https://x.com/KupiaSecurity" target="_blank" rel="noopener" title="Twitter" class="md-footer-social__link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
        </a>
      </div>
    </div>
  </div>
</footer>

      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "header.autohide", "navigation.top", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>